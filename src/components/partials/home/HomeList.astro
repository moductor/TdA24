---
import type { Lecturer } from "../../../models/Lecturer";

import HomeItem from "./HomeItem.astro";

type Props = {
  lecturers: Lecturer[];
  [prop: string]: any;
};

const { lecturers, ...props } = Astro.props;
---

<div {...props} data-lecturer-list>
  {lecturers.map((lecturer) => <HomeItem lecturer={lecturer} />)}
</div>

<style lang="scss">
  [data-lecturer-list] {
    --portrait-size: 16rem;

    display: grid;
    row-gap: 3rem;
    align-content: start;

    @media (min-width: 720px) {
      grid-template-columns: var(--portrait-size) 1fr;
    }

    > * {
      grid-column: 1 / -1;
    }
  }
</style>

<script>
  import type { WindowExtension } from "../../partials/home/filters/Filters";
  declare let window: WindowExtension;

  const list = document.querySelector("[data-lecturer-list]") as HTMLElement;
  const listItems = list.querySelectorAll("[data-lecturer-item]");

  const items: { [uuid: string]: HTMLElement } = {};
  for (const _item of listItems) {
    const item = _item as HTMLElement;
    const uuid = item.getAttribute("data-lecturer-item")!;
    items[uuid] = item;
  }

  window.reloadLecturers = (filteredIDs) => {
    list.innerHTML = "";
    for (const uuid of filteredIDs) {
      const item = items[uuid];
      list.append(item);
    }
  };
</script>
